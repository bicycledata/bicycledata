{% extends "layout.html" %}
{% set title = current_user.name %}

{% block section %}
{% with messages = get_flashed_messages() %}
{% if messages %}
<section>
  <h4>Notification</h4>
  <ul class="alt">
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
  </ul>
</section>
{% endif %}
{% endwith %}

<section id="banner">
  <div class="content">
    <header>
      <h1>My Sessions</h1>
    </header>

    <section>
      <ul>
        <li><strong>Total Sessions: {{ sessions|length }}</strong>
          {% if request.args.get('all') == '1' %}
          <a class="button small" href="/sessions">Show GPS only</a>
          {% else %}
          <a class="button small" href="/sessions?all=1">Show all</a>
          {% endif %}
          {% if request.args.get('hidden') == '1' %}
          <a class="button small" href="/sessions{% if request.args.get('all') == '1' %}?all=1{% endif %}">Hide hidden</a>
          {% else %}
          <a class="button small" href="/sessions?hidden=1{% if request.args.get('all') == '1' %}&all=1{% endif %}">Show hidden</a>
          {% endif %}
        </li>
        {% for session in sessions %}
        <li>
          <a href="/v2/devices/{{ session.device }}/sessions/{{ session.date }}">{{ session.date }}</a>
          {% if session.hidden %}<span style="color: #888;"> (hidden)</span>{% endif %}
        </li>
        {% endfor %}
      </ul>
    </section>

  </div>
</section>

{% endblock %}
